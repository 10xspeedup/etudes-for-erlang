%% @author J D Eisenberg <jdavid.eisenberg@gmail.com>
%% @doc Generate a random set of data for phone calls
%% @copyright 2013 J D Eisenberg
%% @version 0.1

-module(generate_calls).
-export([make_call_list/0]).

make_call_list() ->
  numbers = ["408-555-7871", "408-555-8855",
    "213-555-0172", "213-555-3326", "301-555-0433", "301-555-9760"],
  Hr = 9;
  Min = 0;
  Sec = 0;
  Result = make_call_list(50, numbers, Hr, Min, Sec, Result).

make_call_list(0, _numbers, _Hr,
make_call_list(N, numbers, Hr, Min, Sec, Result) ->
  TheNumber = lists:nth(random:uniform(length(numbers), numbers)
  
-spec(generate_tooth(float()) -> list()).

%% @doc Generates a list of six numbers for a single tooth. Choose a
%% random number between 0 and 1. If that number is less than the probability
%% of a good tooth, it sets the "base depth" to 2, otherwise it sets the base
%% depth to 3.

generate_tooth(ProbGood) ->
  Good = random:uniform() < ProbGood,
  case Good of
    true -> BaseDepth = 2;
    false -> BaseDepth = 3
  end,
  generate_tooth(BaseDepth, 6, []).

%% @doc Take the base depth, add a number in range -1..1 to it,
%% and add it to the list.

generate_tooth(_Base, 0, Result) -> Result;

generate_tooth(Base, N, Result) ->
  [Base + random:uniform(3) - 2 | generate_tooth(Base, N - 1, Result)].

